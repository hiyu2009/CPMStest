<div class="container">
    <div class="row">
        <div class="col-lg-12">
            <h1>외주인력 관리</h1>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-8">
            <select class="form-control" [(ngModel)]="selProject.projectId">
                <option value=0 disabled selected>프로젝트 목록</option>
                <option *ngFor="let listModel of projectList" [value]="listModel.projectId">{{listModel.projectName}}
                </option>
            </select>
        </div>
        <div class="col-lg-2">
            <button class="btn btn-block btn-default" (click)="onSearchOutsourcing()">조회</button>
        </div>
        <div class="col-lg-2">
            <button class="btn btn-block btn-success" (click)="addDataModal.open()">추가</button>
        </div>
    </div>

    <div class="row">
        <table class="table table-striped table-bordered table-hover">
            <thead>
            <tr>
                <th>사업자명</th>
                <th>사업자 구분</th>
                <th>등급</th>
                <th>시작일</th>
                <th>종료일</th>
                <th>계약금액</th>
            </tr>
            </thead>
            <tbody>
                <tr *ngFor="let outsourcingModel of outsourcingList">
                    <td>
                        <input type="text" [(ngModel)]="outsourcingModel.partnerName" (click)="partnerSearchModal.open('lg')"/>
                        <!--<inline-edit [(ngModel)]="outsourcingModel.partnerName" (onSave)="saveEditable($event)"></inline-edit>-->
                    </td>
                    <td>
                        <!-- <inline-edit [(ngModel)]="UserListModel.deptName" (onSave)="saveEditable($event)"></inline-edit> -->
                        <select class="form-control" [(ngModel)]="outsourcingModel.partnerId" (ngModelChange)="onChange($event)" required>
                            <option disabled *ngFor="let bussinessModel of bussinessListModel" [value]="bussinessModel.businessCode">
                                {{ bussinessModel.description}}
                            </option>
                        </select>
                    </td>
                    <td class="center">
                        <!--<inline-edit [(ngModel)]="outsourcingModel.rankName" (onSave)="saveEditable($event)"></inline-edit>-->
                        <select class="form-control" [(ngModel)]="outsourcingModel.ratingCode" (ngModelChange)="onChange($event)" required>
                            <option *ngFor="let ratingCodeModel of ratingListModel" [value]="ratingCodeModel.ratingCode">
                                {{ ratingCodeModel.description }}
                            </option>
                        </select>
                    </td>
                    <td class="center">
                        <!-- <inline-edit [(ngModel)]="outsourcingModel.description" (onSave)="saveEditable($event)"></inline-edit> -->
                        <datepicker [(ngModel)]="outsourcingModel.startDate" view-format="YYYY-MM-DD" model-format="YYYY-MM-DD" init-date=""></datepicker>
                    </td>
                    <td>
                        <datepicker [(ngModel)]="outsourcingModel.endDate" view-format="YYYY-MM-DD" model-format="YYYY-MM-DD" init-date=""></datepicker>
                    </td>
                    <td>
                        <inline-edit [(ngModel)]="outsourcingModel.outsourcingAmount" (onSave)="saveEditable($event)"></inline-edit>
                    </td>
                    <td>
                        <span class="glyphicon glyphicon-minus" aria-hidden="true" (click)="deleteData()"></span>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    <modal style="z-index: 1049" [animation]="animation" [keyboard]="keyboard" [backdrop]="backdrop" (onClose)="selDeptModalClose()" (onDismiss)="dismissed()"  (onOpen)="selDeptModalOpen()" #partnerSearchModal>
        <modal-header [show-close]="true">
            <h3>외주목록 등록</h3>
        </modal-header>
        <modal-body>
            <div class="container">
                <div class="row">
                    <form class="form-inline">
                        <div class="col-lg-10">
                            <input type="text" [(ngModel)]="partnerNameModel.partnerName" required/>
                        </div>
                        <div class="col-lg-2">
                            <button type="button" class="btn btn-default btn-block" (click)="searchPartner()">조회</button>
                        </div>
                    </form>
                </div>
                <div class="row">
                    <p >선택된 파트너 이름: {{selPartner.partnerName}}</p>
                </div>
                <div class="row">
                    <table class="table table-striped table-bordered table-hover">
                        <thead>
                        <tr>
                            <th>사업자 번호</th>
                            <th>사업자 명</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr *ngFor="let partnerModel of searchPartnerModel" (click)="partnerRowClick(partnerModel)">
                            <td>{{partnerModel.businessNumber}}</td>
                            <td>{{partnerModel.partnerName}}</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </modal-body>
        <modal-footer>
            <button type="button" class="btn btn-default" data-dismiss="modal" (click)="partnerSearchModal.dismiss()">닫기</button>
            <button type="button" class="btn btn-primary" (click)="partnerSearchModal.close()">선택</button>
        </modal-footer>
    </modal>

    <modal style="z-index: 1049" [animation]="animation" [keyboard]="keyboard" [backdrop]="backdrop" (onClose)="addModalClose()" (onDismiss)="dismissed()"  (onOpen)="opened()" #addDataModal>
        <modal-header [show-close]="true">
            <h3>외주목록 등록</h3>
        </modal-header>
        <modal-body>
            <div class="container">
                <div class="row">
                    <div class="col-lg-10">
                        <!--<input type="text" [(ngModel)]="addOutsourcingModel.">-->
                    </div>
                </div>
            </div>
        </modal-body>
        <modal-footer>
            <button type="button" class="btn btn-default" data-dismiss="modal" (click)="partnerSearchModal.dismiss()">닫기</button>
            <button type="button" class="btn btn-primary" (click)="partnerSearchModal.close()">선택</button>
        </modal-footer>
    </modal>
</div>